# BSD n8n AI Dev Studio - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë¬¸ì„œ

## ğŸ“ ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BSD n8n AI Dev Studio                    â”‚
â”‚                   (Next.js 15 Application)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚    â”‚   Backend    â”‚    â”‚  External    â”‚
â”‚   (React)    â”‚    â”‚  (Next API)  â”‚    â”‚  Services    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat UI      â”‚    â”‚ AI Engine    â”‚    â”‚ OpenAI GPT-4 â”‚
â”‚ Workflow     â”‚    â”‚ Workflow Gen â”‚    â”‚ Anthropic    â”‚
â”‚ Preview      â”‚    â”‚ n8n Client   â”‚    â”‚ n8n API      â”‚
â”‚ Debug View   â”‚    â”‚ Playwright   â”‚    â”‚ Playwright   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

### ì›Œí¬í”Œë¡œìš° ìƒì„± í”Œë¡œìš°

```
1. User Input (ìì—°ì–´)
   â”‚
   â”œâ”€ "ìŠ¤í‹°ë¹„ ì‹ ê·œ êµ¬ë…ì â†’ ì¹´í†¡ ì•Œë¦¼"
   â”‚
   â–¼
2. AI Intent Analyzer (OpenAI GPT-4)
   â”‚
   â”œâ”€ Intent: notification_automation
   â”œâ”€ Trigger: Stibee webhook
   â”œâ”€ Actions: KakaoTalk message
   â”œâ”€ Complexity: simple
   â”‚
   â–¼
3. Workflow Generator
   â”‚
   â”œâ”€ Node Template Matching
   â”œâ”€ JSON Structure Generation
   â”œâ”€ Connection Auto-wiring
   â”‚
   â–¼
4. n8n API Client
   â”‚
   â”œâ”€ POST /api/v1/workflows
   â”œâ”€ Workflow Deployment
   â”‚
   â–¼
5. Auto Test Execution
   â”‚
   â”œâ”€ Generate mock data
   â”œâ”€ Trigger workflow
   â”œâ”€ Validate results
   â”‚
   â–¼
6. Success/Failure
   â”‚
   â”œâ”€ [Success] â†’ Save as template
   â”‚
   â”œâ”€ [Failure] â†’ AI Debugger
   â”‚              â”‚
   â”‚              â”œâ”€ Playwright screenshot
   â”‚              â”œâ”€ AI Vision analysis
   â”‚              â”œâ”€ Auto fix generation
   â”‚              â”‚
   â”‚              â–¼
   â”‚           Re-test (ìµœëŒ€ 3íšŒ)
   â”‚
   â–¼
7. Final Workflow
```

### AI ë””ë²„ê¹… í”Œë¡œìš°

```
Error Detected
   â”‚
   â”œâ”€ Execution Log Collection
   â”‚
   â–¼
Playwright Service
   â”‚
   â”œâ”€ Navigate to n8n workflow
   â”œâ”€ Capture screenshot
   â”œâ”€ Extract error UI elements
   â”‚
   â–¼
AI Debugger (Vision + Text Analysis)
   â”‚
   â”œâ”€ Parse error message
   â”œâ”€ Identify affected node
   â”œâ”€ Analyze root cause
   â”‚
   â–¼
Fix Generation
   â”‚
   â”œâ”€ Code changes
   â”œâ”€ Parameter adjustments
   â”œâ”€ Manual steps (if needed)
   â”‚
   â–¼
Auto-apply Fix
   â”‚
   â”œâ”€ Update workflow JSON
   â”œâ”€ Deploy to n8n
   â”‚
   â–¼
Re-test Workflow
   â”‚
   â”œâ”€ [Success] â†’ Done
   â”œâ”€ [Failure] â†’ Retry (max 3)
```

## ğŸ—ï¸ ì»´í¬ë„ŒíŠ¸ ìƒì„¸ ì„¤ê³„

### 1. AI Intent Analyzer

**ìœ„ì¹˜**: `src/services/ai-intent-analyzer.ts`

**ì—­í• **: ìì—°ì–´ ì…ë ¥ì„ êµ¬ì¡°í™”ëœ ì›Œí¬í”Œë¡œìš° ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ë³€í™˜

**ì£¼ìš” ë©”ì„œë“œ**:
- `analyzeIntent(userInput: string)` â†’ IntentAnalysis
- `analyzeWithSuggestions(userInput: string)` â†’ Enhanced Analysis
- `getExampleIntents()` â†’ Example prompts

**ì‚¬ìš© AI ëª¨ë¸**: OpenAI GPT-4

**ì…ë ¥ ì˜ˆì‹œ**:
```
"ìŠ¤í‹°ë¹„ì— ì‹ ê·œ êµ¬ë…ì ë“¤ì–´ì˜¤ë©´ ì¹´í†¡ìœ¼ë¡œ ì•Œë ¤ì¤˜"
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```typescript
{
  intent: "notification_automation",
  trigger: {
    service: "Stibee",
    event: "new_subscriber"
  },
  actions: [
    {
      service: "KakaoTalk",
      action: "send_message",
      data_fields: ["email", "name"]
    }
  ],
  required_nodes: ["Webhook", "Function", "HTTP Request"],
  complexity: "simple",
  estimated_nodes: 3
}
```

### 2. Workflow Generator

**ìœ„ì¹˜**: `src/services/workflow-generator.ts`

**ì—­í• **: Intent ë¶„ì„ ê²°ê³¼ë¥¼ n8n workflow JSONìœ¼ë¡œ ë³€í™˜

**ì£¼ìš” ë©”ì„œë“œ**:
- `generateWorkflow(analysis, userInput)` â†’ WorkflowGenerationResult
- `generateOptimizedWorkflow(analysis, userInput)` â†’ Enhanced workflow
- `validateWorkflow(workflow)` â†’ Validation result

**ë…¸ë“œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬**:
- Webhook, Gmail, Slack, HTTP Request
- Function, Google Sheets, Schedule Trigger
- Notion, Discord, Telegram, etc.

**ìë™ ìƒì„± ìš”ì†Œ**:
- ë…¸ë“œ ìœ„ì¹˜ ìë™ ê³„ì‚° (visual layout)
- ì—°ê²° ê·¸ë˜í”„ ìë™ ìƒì„±
- ë°ì´í„° ë³€í™˜ ì½”ë“œ ìë™ ì‘ì„±
- ì—ëŸ¬ í•¸ë“¤ë§ ë¡œì§ ì¶”ê°€

### 3. n8n API Client

**ìœ„ì¹˜**: `src/services/n8n-api-client.ts`

**ì—­í• **: n8n REST APIì™€ì˜ í†µì‹  ê´€ë¦¬

**ì£¼ìš” ë©”ì„œë“œ**:
- `createWorkflow(workflow)` â†’ { id, workflow }
- `executeWorkflow(workflowId, data)` â†’ { executionId }
- `getExecution(executionId)` â†’ WorkflowExecution
- `testConnection()` â†’ { success, version }

**ì§€ì› í™˜ê²½**:
- Local n8n (localhost:5678)
- n8n Cloud (app.n8n.cloud)
- Self-hosted instances

### 4. AI Debugger

**ìœ„ì¹˜**: `src/services/ai-debugger.ts`

**ì—­í• **: ì›Œí¬í”Œë¡œìš° ì—ëŸ¬ ìë™ ì§„ë‹¨ ë° ìˆ˜ì •

**ì£¼ìš” ë©”ì„œë“œ**:
- `analyzeScreenshot(screenshot, execution)` â†’ DebugAnalysis
- `analyzeExecutionLog(execution, workflow)` â†’ DebugAnalysis
- `generateFix(workflow, analysis)` â†’ Fixed workflow
- `debugWithRetry(workflow, execution, screenshot, maxAttempts)` â†’ Result

**ë””ë²„ê¹… ì „ëµ**:

**1ë‹¨ê³„: ë¹ ë¥¸ íŒ¨í„´ ë§¤ì¹­**
```typescript
const patterns = [
  { pattern: /authentication.*failed/, solution: "API Key ì¬ì„¤ì •" },
  { pattern: /undefined.*property/, solution: "ë°ì´í„° í•„ë“œ í™•ì¸" },
  { pattern: /timeout/, solution: "Timeout ì„¤ì • ì¦ê°€" }
];
```

**2ë‹¨ê³„: AI Vision ë¶„ì„** (screenshot ìˆì„ ë•Œ)
- n8n UIì—ì„œ ë¹¨ê°„ìƒ‰ ì—ëŸ¬ í‘œì‹œ ê°ì§€
- ì—ëŸ¬ ë©”ì‹œì§€ OCR ì¶”ì¶œ
- ë…¸ë“œ ìƒíƒœ ì‹œê°ì  ë¶„ì„

**3ë‹¨ê³„: AI Text ë¶„ì„** (execution log)
- ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ íŒŒì‹±
- ì…ë ¥ ë°ì´í„° ê²€ì¦
- ë¡œì§ íë¦„ ë¶„ì„

### 5. Playwright Service

**ìœ„ì¹˜**: `src/services/playwright-service.ts`

**ì—­í• **: n8n ì›¹ UI ìë™í™” ë° ëª¨ë‹ˆí„°ë§

**ì£¼ìš” ë©”ì„œë“œ**:
- `navigateToWorkflow(n8nUrl, workflowId)` â†’ void
- `captureWorkflowScreenshot()` â†’ base64 image
- `detectErrors()` â†’ { hasErrors, errorNodes }
- `waitForExecutionComplete(timeout)` â†’ { success, duration }

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**:
1. ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ëª¨ë‹ˆí„°ë§
2. ì—ëŸ¬ ìŠ¤í¬ë¦°ìƒ· ìë™ ìº¡ì²˜
3. ë””ë²„ê¹…ìš© ì‹œê°ì  ìƒíƒœ í™•ì¸
4. E2E í…ŒìŠ¤íŠ¸ ìë™í™”

## ğŸ¨ Frontend ì•„í‚¤í…ì²˜

### Component Hierarchy

```
App
â”œâ”€â”€ Layout (globals.css, dark mode)
â”‚
â”œâ”€â”€ Page (/)
â”‚   â””â”€â”€ ChatInterface
â”‚       â”œâ”€â”€ MessageList
â”‚       â”‚   â”œâ”€â”€ MessageBubble
â”‚       â”‚   â”‚   â”œâ”€â”€ IntentPreview
â”‚       â”‚   â”‚   â”œâ”€â”€ WorkflowPreview
â”‚       â”‚   â”‚   â””â”€â”€ ExecutionStatus
â”‚       â”‚   â””â”€â”€ MessagesEndRef
â”‚       â”‚
â”‚       â””â”€â”€ InputArea
â”‚           â”œâ”€â”€ Textarea
â”‚           â”œâ”€â”€ SendButton
â”‚           â””â”€â”€ QuickExamples
â”‚
â”œâ”€â”€ /workflows (planned)
â”‚   â”œâ”€â”€ WorkflowList
â”‚   â””â”€â”€ WorkflowCard
â”‚
â”œâ”€â”€ /workflows/[id] (planned)
â”‚   â”œâ”€â”€ WorkflowCanvas
â”‚   â”œâ”€â”€ NodePanel
â”‚   â””â”€â”€ FloatingToolbar
â”‚
â””â”€â”€ /workflows/[id]/debug (planned)
    â”œâ”€â”€ LiveScreenshot
    â”œâ”€â”€ AIAnalysis
    â””â”€â”€ ExecutionLog
```

### State Management (Zustand)

**Planned Stores**:

```typescript
// useWorkflowStore
interface WorkflowStore {
  workflows: N8nWorkflow[];
  currentWorkflow: N8nWorkflow | null;
  isGenerating: boolean;
  addWorkflow: (workflow: N8nWorkflow) => void;
  updateWorkflow: (id: string, updates: Partial<N8nWorkflow>) => void;
  deleteWorkflow: (id: string) => void;
}

// useChatStore
interface ChatStore {
  messages: ChatMessage[];
  isLoading: boolean;
  addMessage: (message: ChatMessage) => void;
  clearMessages: () => void;
}

// useSettingsStore
interface SettingsStore {
  n8nInstanceUrl: string;
  n8nApiKey: string;
  preferredAiModel: 'gpt-4' | 'claude-3';
  autoTestWorkflows: boolean;
  updateSettings: (settings: Partial<UserSettings>) => void;
}
```

## ğŸ”Œ API Routes

### POST /api/analyze-intent

**Input**:
```json
{
  "input": "ì‚¬ìš©ì ìì—°ì–´ ì…ë ¥"
}
```

**Output**:
```json
{
  "success": true,
  "data": {
    "intent": "...",
    "trigger": { ... },
    "actions": [ ... ],
    "required_nodes": [ ... ],
    "complexity": "simple|medium|complex",
    "estimated_nodes": 3
  }
}
```

### POST /api/generate-workflow

**Input**:
```json
{
  "intent_analysis": { ... },
  "user_input": "ì›ë³¸ ì…ë ¥"
}
```

**Output**:
```json
{
  "success": true,
  "data": {
    "workflow_json": { ... },
    "estimated_complexity": "simple",
    "optimizations": [ "..." ]
  }
}
```

### POST /api/deploy-workflow

**Input**:
```json
{
  "workflow_json": { ... },
  "n8n_instance": "http://localhost:5678",
  "api_key": "..."
}
```

**Output**:
```json
{
  "success": true,
  "data": {
    "workflow_id": "123",
    "status": "deployed",
    "webhook_url": "..."
  }
}
```

## ğŸ—„ï¸ ë°ì´í„° ëª¨ë¸

### TypeScript Types

ëª¨ë“  íƒ€ì… ì •ì˜ëŠ” `src/types/index.ts`ì— ìœ„ì¹˜

**í•µì‹¬ íƒ€ì…**:
- `IntentAnalysis` - AI ë¶„ì„ ê²°ê³¼
- `N8nWorkflow` - n8n ì›Œí¬í”Œë¡œìš° JSON êµ¬ì¡°
- `N8nNode` - n8n ë…¸ë“œ ì •ì˜
- `WorkflowExecution` - ì‹¤í–‰ ê²°ê³¼
- `DebugAnalysis` - ë””ë²„ê¹… ë¶„ì„ ê²°ê³¼
- `ChatMessage` - ì±„íŒ… ë©”ì‹œì§€
- `WorkflowTemplate` - ì¬ì‚¬ìš© ê°€ëŠ¥ í…œí”Œë¦¿

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### API Key ë³´í˜¸

- í™˜ê²½ ë³€ìˆ˜ë¡œë§Œ ê´€ë¦¬ (`.env.local`)
- Gitì— ì»¤ë°‹ ê¸ˆì§€ (`.gitignore`)
- Frontendì—ì„œ ì§ì ‘ ì‚¬ìš© ê¸ˆì§€
- Backend API Routesë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼

### n8n ì¸ì¦

- API Key ê¸°ë°˜ ì¸ì¦
- HTTPS ì‚¬ìš© ê¶Œì¥ (í”„ë¡œë•ì…˜)
- CORS ì„¤ì • í•„ìš”

### ë°ì´í„° í”„ë¼ì´ë²„ì‹œ

- ì‚¬ìš©ì ì…ë ¥ ë¡œê·¸ ìµœì†Œí™”
- API ì‘ë‹µ ìºì‹± ì£¼ì˜
- ë¯¼ê° ì •ë³´ ìë™ í•„í„°ë§

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### Frontend ìµœì í™”

- React Server Components í™œìš©
- Dynamic importë¡œ Code splitting
- Image optimization (next/image)
- API response caching (React Query)

### Backend ìµœì í™”

- n8n API í˜¸ì¶œ ìºì‹±
- AI ë¶„ì„ ê²°ê³¼ ìºì‹± (Redis ì˜ˆì •)
- Workflow template caching
- Batch API requests

### AI ìµœì í™”

- Intent ë¶„ì„: GPT-4 Turbo ì‚¬ìš©
- ê°„ë‹¨í•œ ë¶„ì„: GPT-3.5 Turboë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ
- ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì²´ê° ì†ë„ í–¥ìƒ
- Prompt caching í™œìš©

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### Unit Tests (Jest + React Testing Library)

- Component rendering tests
- Service layer logic tests
- Utility function tests

### Integration Tests

- API routes testing
- n8n client integration
- AI service integration

### E2E Tests (Playwright)

- Full workflow creation flow
- Error handling flows
- User interaction scenarios

## ğŸš€ ë°°í¬ ì „ëµ

### Development

```bash
npm run dev
# http://localhost:3000
```

### Production (Vercel)

```bash
vercel deploy --prod
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**:
- OPENAI_API_KEY
- N8N_INSTANCE_URL
- N8N_API_KEY
- ANTHROPIC_API_KEY (optional)

### Docker (Future)

```dockerfile
FROM node:20-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
```

## ğŸ“ˆ í™•ì¥ ê³„íš

### Phase 1: MVP (í˜„ì¬)
- âœ… AI Intent ë¶„ì„
- âœ… ì›Œí¬í”Œë¡œìš° ìë™ ìƒì„±
- âœ… n8n API ì—°ë™
- âœ… ê¸°ë³¸ Chat UI

### Phase 2: Auto-Debug
- âœ… Playwright í†µí•©
- âœ… AI Vision ë””ë²„ê¹…
- â³ ìë™ ìˆ˜ì • ë£¨í”„ ì™„ì„±
- â³ ë””ë²„ê¹… ëŒ€ì‹œë³´ë“œ

### Phase 3: Template Library
- â³ í…œí”Œë¦¿ ì €ì¥ ì‹œìŠ¤í…œ
- â³ ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜
- â³ ê²€ìƒ‰ ë° í•„í„°
- â³ ì‚¬ìš© í†µê³„

### Phase 4: Advanced Features
- â³ ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° ì§€ì›
- â³ ì¡°ê±´ë¶€ ë¡œì§
- â³ ì—ëŸ¬ í•¸ë“¤ë§
- â³ A/B í…ŒìŠ¤íŠ¸

### Phase 5: Enterprise
- â³ íŒ€ í˜‘ì—…
- â³ ë²„ì „ ê´€ë¦¬
- â³ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§
- â³ ì»¤ìŠ¤í…€ ë…¸ë“œ ìƒì„±

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-16
**ì‘ì„±ì**: BSD Vibe Coding Center
